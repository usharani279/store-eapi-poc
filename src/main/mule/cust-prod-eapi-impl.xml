<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd">
	<sub-flow name="insertingCustomer-flow" doc:id="ab17ba82-b1ff-49a6-850a-29494003def3" >
		<logger level="INFO" doc:name="start logger" doc:id="234369de-9e10-4ab1-a248-98c971e8e633" message='#["start logger"]'/>
		<ee:transform doc:name="payload from process flow" doc:id="8e608811-96b9-4664-baaf-9d9ad35532c0" >
			<ee:message >
			</ee:message>
			<ee:variables >
				<ee:set-variable variableName="inputData" ><![CDATA[%dw 2.0
output application/json
---
payload]]></ee:set-variable>
			</ee:variables>
		</ee:transform>
		<http:request method="POST" doc:name="Requesting process customer  flow" doc:id="7b06899f-fccd-41be-876d-8068c5f1071f" path="${http.request.customerPath}" responseTimeout="70000000" config-ref="HTTP_Request_configuration">
			<http:body ><![CDATA[#[vars.inputData]]]></http:body>
		</http:request>
		<logger level="INFO" doc:name="end Logger" doc:id="c137b630-48ce-4abd-b91e-52c2a45968cf" message='#["end logger"]'/>
	
</sub-flow>
	<sub-flow name="fetching-customerDetails-flow" doc:id="e5f3d3ff-2bcb-4371-b14f-751ad86d96a6" >
		<logger level="INFO" doc:name="start logger" doc:id="b128c334-d1e9-4754-b729-f0d98e04df99" message='#["start logger"]' />
		<http:request method="GET" doc:name="Requesting process customer  flow" doc:id="499fca1c-c420-4ce5-8149-e7cf99ad033b" path="${http.request.customerPath}" responseTimeout="70000000" config-ref="HTTP_Request_configuration">
		</http:request>
		<logger level="INFO" doc:name="end logger" doc:id="e51bbf59-0bd1-49b7-998b-56d297e8ec49" message="end logger"/>
	</sub-flow>
	<sub-flow name="updating-Customer-flow" doc:id="43636427-de20-43d9-b849-85544a06c6a8" >
		<logger level="INFO" doc:name="start logger" doc:id="7ddaed63-ae5d-4aaf-949f-c62f6ed15de3" message='#["start logger"]'/>
		<ee:transform doc:name="metaData" doc:id="dc260c63-676c-4417-a3df-6d5a66f4dc90" >
			<ee:message >
			</ee:message>
			<ee:variables >
				<ee:set-variable variableName="inputData" ><![CDATA[%dw 2.0
output application/json
---
payload]]></ee:set-variable>
				<ee:set-variable variableName="id" ><![CDATA[%dw 2.0
output application/json
---
attributes.queryParams.customerId]]></ee:set-variable>
			</ee:variables>
		</ee:transform>
		<http:request method="GET" doc:name="Requesting process customer  flow" doc:id="e308acc2-91da-4023-978a-817e464dce83" path="${http.request.customerPath}" responseTimeout="70000000" config-ref="HTTP_Request_configuration">
			<http:body ><![CDATA[#[vars.inputData]]]></http:body>
			<http:query-params ><![CDATA[#[output application/java
---
{
	customerId : vars.id
}]]]></http:query-params>
		</http:request>
		<logger level="INFO" doc:name="end logger" doc:id="960ed59a-5a2b-4a02-bcee-6308357d02ac" message="end logger"/>
	</sub-flow>
	<sub-flow name="deleteCustomer_Flow" doc:id="f89cd585-f959-4939-94d2-8ac7fbaaab8a" >
		<logger level="INFO" doc:name="start logger" doc:id="09b2de10-ecf4-495a-9336-5a63e66cd360" message='#["start logger"]'/>
		<ee:transform doc:name="metaData" doc:id="e71bb575-7f74-4c8a-9acf-b6850618f845" >
			<ee:message >
			</ee:message>
			<ee:variables >
				<ee:set-variable variableName="id" ><![CDATA[%dw 2.0
output application/json
---
attributes.queryParams.customerId]]></ee:set-variable>
			</ee:variables>
		</ee:transform>
		<http:request method="GET" doc:name="Requesting process customer  flow" doc:id="28d4c68f-3d34-4548-ac2f-02f380672f91" path="${http.request.customerPath}" responseTimeout="70000000" config-ref="HTTP_Request_configuration">
			<http:query-params ><![CDATA[#[output application/java
---
{
	customerId : vars.id
}]]]></http:query-params>
		</http:request>
		<logger level="INFO" doc:name="end logger" doc:id="a8c03f5a-f62c-42bf-9b75-c175189fd354" message="end logger"/>
	</sub-flow>
	<sub-flow name="inserting-ProductData-flow" doc:id="9b5d1a4e-477e-48c9-9956-fe2ef13b65ac" >
		<logger level="INFO" doc:name="start logger" doc:id="3f14302a-ba44-404c-86c6-a0063b0fca38" message="start logger"/>
		<ee:transform doc:name="inputData" doc:id="5a9571d6-e24a-4c3d-9e69-1622c4ffb248" >
			<ee:message >
			</ee:message>
			<ee:variables >
				<ee:set-variable variableName="inputData" ><![CDATA[%dw 2.0
output application/json
---
payload]]></ee:set-variable>
			</ee:variables>
		</ee:transform>
		<http:request method="POST" doc:name="Requesting process product flow" doc:id="5be44ecf-5391-4d73-86c3-6dc29ab65f4a" path="${http.request.productPath}" responseTimeout="80000000" config-ref="HTTP_Request_configuration">
			<http:body ><![CDATA[#[vars.inputData]]]></http:body>
		</http:request>
		<logger level="INFO" doc:name="end logger" doc:id="26b095ae-a923-4d96-9dcf-b4fde6801de3" message="end logger"/>
	</sub-flow>
	<sub-flow name="fetching-ProductData-flow" doc:id="fa553460-25c4-408a-836b-11fdaf4c1e67" >
		<logger level="INFO" doc:name="start logger" doc:id="f87b27ae-d5aa-46da-bbc7-bc48452cfa7d" message="start logger"/>
		<http:request method="GET" doc:name="Requesting process product flow" doc:id="345e89bb-d66e-4b76-90a6-3e34b4978c0e" path="${http.request.productPath}" responseTimeout="7000000" config-ref="HTTP_Request_configuration"/>
		<logger level="INFO" doc:name="end logger" doc:id="e167d9a3-02d1-4f5e-96ac-e33ab49f1d34" message="end logger"/>
	</sub-flow>
	<sub-flow name="updating-Product-flow" doc:id="9e8e173c-e02c-4c44-ae5f-2aed69ae41f2" >
		<logger level="INFO" doc:name="start logger" doc:id="fee1e6ee-8c0c-47d7-83ac-4b45dff76ce5" message="start logger"/>
		<ee:transform doc:name="metaData" doc:id="505b5b80-e4a1-467a-9be0-f8e5ec87abee" >
			<ee:message />
			<ee:variables >
				<ee:set-variable variableName="inputData" ><![CDATA[%dw 2.0
output application/json
---
payload]]></ee:set-variable>
				<ee:set-variable variableName="id" ><![CDATA[%dw 2.0
output application/json
---
attributes.queryParams.productId]]></ee:set-variable>
			</ee:variables>
		</ee:transform>
		<http:request method="PUT" doc:name="Requesting process product flow" doc:id="4a4b844c-0f96-4bd2-8e48-2949b65bddb5" path="${http.request.productPath}" responseTimeout="8000000" config-ref="HTTP_Request_configuration">
			<http:body ><![CDATA[#[vars.inputData]]]></http:body>
			<http:query-params ><![CDATA[#[output application/java
---
{
	"productId" : vars.id
}]]]></http:query-params>
		</http:request>
		<logger level="INFO" doc:name="end logger" doc:id="8b225b47-c543-4428-8196-79cf862bdfdb" message="end logger"/>
	</sub-flow>
	<sub-flow name="delete-Product-flow" doc:id="a0c9dc8b-4b99-4306-9ff2-d5db8d16467c" >
		<logger level="INFO" doc:name="start logger" doc:id="064bb2e7-3c23-47e0-b541-5771fe9c69cd" message="start logger"/>
		<ee:transform doc:name="metaData" doc:id="c448d486-5d54-42a1-acc9-029129d8c35a" >
			<ee:message >
			</ee:message>
			<ee:variables >
				<ee:set-variable variableName="id" ><![CDATA[%dw 2.0
output application/json
---
attributes.queryParams.productId]]></ee:set-variable>
			</ee:variables>
		</ee:transform>
		<http:request method="DELETE" doc:name="Requesting process product flow" doc:id="92d4ccf5-e1d0-4de1-8a4c-2a737b451df6" path="${http.request.productPath}" responseTimeout="#[8000000]" config-ref="HTTP_Request_configuration">
			<http:query-params ><![CDATA[#[output application/java
---
{
	"productId" : vars.id
}]]]></http:query-params>
		</http:request>
		<logger level="INFO" doc:name="end logger" doc:id="84c8d7d5-46e4-4f25-84e3-247e6c2dec81" message="end logger"/>
	</sub-flow>
	<sub-flow name="fetchTransactionDetails_Flow" doc:id="c15b12e8-5979-4501-9bf7-4638ef8e9bdb" >
		<logger level="INFO" doc:name="start logger" doc:id="2a5b537f-728d-4c6f-843b-dcc4d20f7dd1" message="start logger"/>
		<http:request method="GET" doc:name="Requesting process transaction flow" doc:id="280a9c71-9ca0-4d64-9c35-08b939d94926" path="${http.request.transactionPath}" responseTimeout="8000000" config-ref="HTTP_Request_configuration">
			<http:query-params ><![CDATA[#[output application/java
---
{
	"transactionDate" : attributes.queryParams.transactionDate
}]]]></http:query-params>
		</http:request>
		<logger level="INFO" doc:name="end logger" doc:id="2ac007bf-0d6e-4ac6-be86-b90c6d309e07" message="end logger"/>
	</sub-flow>
	<sub-flow name="transactionReport_Flow" doc:id="df6204fa-a5e1-41ad-9bc3-7c81afda268a" >
		<logger level="INFO" doc:name="start logger" doc:id="26d4985c-80ea-438f-b04f-75d6a5842a16" message="start logger"/>
		<ee:transform doc:name="metaData" doc:id="a1d2a9fb-69d1-4035-8c37-105a937efba6">
			<ee:message />
			<ee:variables>
				<ee:set-variable variableName="startDate"><![CDATA[%dw 2.0
output application/json
---
((attributes.queryParams.transactionDate splitBy  "to") [0])]]></ee:set-variable>
				<ee:set-variable variableName="endDate"><![CDATA[%dw 2.0
output application/json
---
((attributes.queryParams.transactionDate splitBy  "to") [-1])]]></ee:set-variable>
			</ee:variables>
		</ee:transform>
		<http:request method="GET" doc:name="Requesting process transactionReport flow" doc:id="97122a68-f62b-4ae7-92f3-42a99da97566" path="${http.request.transactionReportPath}" responseTimeout="8000000" config-ref="HTTP_Request_configuration">
			<http:query-params ><![CDATA[#[output application/java
---
{
	"transactionDate" : attributes.queryParams.transactionDate
}]]]></http:query-params>
		</http:request>
		<logger level="INFO" doc:name="end logger" doc:id="1e06a27e-be73-434b-a45e-4f241725435e" message='end logger'/>
	</sub-flow>
	
</mule>
